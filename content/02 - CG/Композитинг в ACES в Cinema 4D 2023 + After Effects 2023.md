
![[20 Pasted image 20240902145710.png|700]]

#### В чём работаем?

[[Cinema 4D]]: 2023.2.1

[[Redshift]]: 3.5.14

[[After Effects]]: 2023 (23.4.0)

---

Так выглядит композ и работа в sRGB.

![https://media.giphy.com/media/ZbNpDvKr8TXz1zE8M4/giphy.gif](https://media.giphy.com/media/ZbNpDvKr8TXz1zE8M4/giphy.gif)

А так в ACES.

![https://media.giphy.com/media/sIV0wFDrsKNxe/giphy.gif](https://media.giphy.com/media/sIV0wFDrsKNxe/giphy.gif)

Давайте разбираться в чем разница и зачем нам нужен ACES workflow.

---

### Сначала стоит рассказать о том, какие плюшки нам даёт ACES:

- Широкий диапазон цветов и света, экспозиция.
- Предсказуемое отображение изображения на широком спектре устройств отображения.
- Сохранение всего спектра бликов, теней и цветов.
- Упрощение сопоставления изображений с разных камер.
- Более точный цветной дисплей без неправильных цветовых значений.
- Работа в линейном цветовом пространстве.
- Нет чрезмерной подсветки и зажима, на ярких областях изображения.

> **Простыми словами и о самом важном - мы можем получить изображение с более широким цветовым диапазоном, где светлые и тёмные участники будет проще вытянуть на композе.**

![[21 Pasted image 20240902145817.png|700]]

![[22 Pasted image 20240902145830.png|700]]

А теперь к делу.

# Настройки [[Cinema 4D]]

До версии 2023.2.0 мы работали в **Basiс sRGB** цветовом пространстве. Но в версии [[Cinema 4D]] 2023.2.0 Максоны изменили стартовый проект и теперь он создается в цветовом пространстве **OpenColorIO ACES**.

Дефолтные настройки Color Management менялись от версии к версии, поэтому рекомендую выставить ACES и сохранить проект как дефолтный. Так мы избавим себя от дальнейшей конвертации текстур и сразу будем работать в ACES.

![[23 Pasted image 20240902145927.png|500]]

Стоит добавить, что мы можем взять любой проект, изначально созданный в sRGB, нажать кнопку **Convert to OCIO…** и все материалы в сцене автоматически конвертируются под ACES.

Важный плюс работы в ACES OCIO - мы можем видеть финальное изображение при рендере, а не Raw как раньше. Единственный минус - медленное воспроизведение, т.к. синема конвертирует каждый фрейм в ACES. Если хотим, чтобы анимация проигрывалась с нормальной скоростью - ставим Off во View Transform.

![[24 Pasted image 20240902150011.png|500]]

---

В настройке материалов придерживаемся стандарта:

Всё, что касается цвета, в частности Diffuse/Base Color - **sRGB**

Всё остальное - **Raw**

Исключение - если у вас текстура (EXR или HDR) в ACES изначально, то и указывать нужно **ACEScg**.

![[25 Pasted image 20240902150049.png|500]]

![[26 Pasted image 20240902150104.png|500]]

---

# Экспорт из [[Cinema 4D]]

В Render Settings оставляем компрессию **ZIP - zlib compression, in blocks of 16 scan lines.** Тесты показали, что это дефолтный и в то же время оптимальный метод сжатия, если мы используем 16 Bit Floats.

![[27 Pasted image 20240902150118.png|600]]

Обязательно ставим галку на **Use 16 Bit Floats,** она серьезно уменьшает вес файла без потери цветового диапазона.

![[28 Pasted image 20240902150129.png|600]]

**ВАЖНО!**

Ни в коем случае не выбирать глубину 16-bit. Она обязательно должна быть **32-bit.**

При рендере в **32-bit** мы работает в линейном пространстве, а в 16 переключаемся на sRGB.

---

# Импорт в After Effects

Выставляем настройки проекта как на скрине. Работать будем в **ACEScg** (не путать с ACES2065-1, который обычно выставляется по дефолту) Ставим 32 бита и 3D LUT Interpolation - Tetrahedral.

![[29 Pasted image 20240902150203.png|600]]

Project Settings.

Кликаем правой кнопкой по рендеру, нажимаем **Interpret footage** и проверяем, чтобы у всех EXR был выбран профиль **ACEScg**.

![[30 Pasted image 20240902150215.png|600]]

У всего остального должна стоять галка на **Preserve RGB**, иначе они будут некорректно отображаться.

![[31 Pasted image 20240902150227.png|600]]

![[32 Pasted image 20240902150237.png|600]]

---

# Работа в [[After Effects]]

Кидаем EXR на таймлайн и видим, что он слишком тёмный, т.к. мы видим рендер в линейном цветовом пространстве.

![[33 Pasted image 20240902150309.png|700]]

Для того, чтобы получить картинку аналогичную той, что была в [[Cinema 4D]] остается накинуть **OCIO Color Space Transform** на отдельный Adjustment Layer и выставить **ACEScg → sRGB**.

![[34 Pasted image 20240902150323.png|600]]

Также важно поменять под вьюпортом режим отображения с **ACES/sRGB** на **None**. Если это не сделать - получим некорректную картинку, т.к. [[After Effects]] накинет OCIO еще раз.

![[35 Pasted image 20240902150343.png|1000]]

Видим, что получили ту же картинку, что на рендере.

![[36 Pasted image 20240902150400.png|700]]

Для того, чтобы раскрыть весь цветовой диапазон - закидываем все эффекты между OCIO и EXR.

![[37 Pasted image 20240902150417.png|600]]

Теперь можем сравнить разницу между обычной PNG в 16-bit и EXR в ACES.

![[38 Pasted image 20240902150431.png|600]]

**PNG 16 bit** | Exposure 3.00

![[39 Pasted image 20240902150444.png|600]]

**EXR 32 bit (16 floats)** | Exposure 3.00

Если нужно добавить на таймлайн футаж, PNG, JPG и т.д. - всегда закидываем выше OCIO и не забываем проставить галку **Preserve sRGB.**

> Теперь вы умеете корректно работать в ACES и вас будет сложнее будет напугать пересветами в сцене.

![https://media.giphy.com/media/111ebonMs90YLu/giphy.gif](https://media.giphy.com/media/111ebonMs90YLu/giphy.gif)